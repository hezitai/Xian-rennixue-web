<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- import CSS -->
  <link rel="stylesheet" href="css/index.css">
</head>
<style>
  .clearfix:after {
    display: block;
    clear: both;
    content: "";
    visibility: hidden;
    height: 0
}
.fl{
  float: left;
}
.red{
  color: red;
}
.green{
  color: green;
}
</style>
<body>
        <div id="app">
        <div v-show="showone">
        <template>
            <el-tabs v-model="activeName" @tab-click="handleClick" style="width: 800px;margin:0 auto;">
              <el-tab-pane label="学生信息" name="first"></el-tab-pane>
              <el-tab-pane label="订单信息" name="second"></el-tab-pane>
            </el-tabs>
          </template>
          <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="180px" style="width:980px;" class="demo-ruleForm">
              <div v-show="!showa">
                  <el-form-item label="手机号" prop="mobile">
                    <el-input
                      style="width:210px;"
                      v-model="ruleForm.mobile"
                      placeholder="请输入手机号">
                    </el-input>
                    <i class="el-icon-error" style="color:red" v-show="yes"></i>
                    <i class="el-icon-success" style="color:green" v-show="no"></i>
                    <el-button type="primary" @click="iftrue">查询</el-button>
                    <i v-show="error" :class="color">{{error}}</i>
                  </el-form-item>
                  <el-form-item label="密码" prop="password" v-show="mobile_show">
                    <el-input v-model="ruleForm.password" placeholder="请输入密码" style="width:210px;"></el-input>
                  </el-form-item>
                  <el-form-item label="学生姓名" prop="nickName">
                    <el-input v-model="ruleForm.nickName" placeholder="请输入学生姓名"></el-input>
                  </el-form-item>
                  <el-form-item label="微信号" prop="wxAccount">
                    <el-input v-model="ruleForm.wxAccount" placeholder="请输入微信号"></el-input>
                  </el-form-item>
                  <el-form-item label="留学国家" prop="countryId">
                      <el-select v-model="ruleForm.countryId" filterable placeholder="请选择留学国家" v-bind:disabled="disabledInput" @change="change_state">
                      <el-option
                      v-for="item in countrys"
                      :key="item.id"
                      :label="item.name"
                      :value="item.id">
                      </el-option>
                    </el-select>
                    <el-button type="primary" @click="display">修改</el-button>
                  </el-form-item>
                  <el-form-item label="学校" prop="universityId">
                      <el-select v-model="ruleForm.universityId" filterable placeholder="请选择学校">
                      <el-option
                      v-for="item in universitys"
                      :key="item.id"
                      :label="item.name"
                      :value="item.id">
                      </el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label="专业" prop="professionalId">
                      <el-select v-model="ruleForm.professionalId" filterable placeholder="请选择专业">
                      <el-option
                      v-for="item in professionalNames"
                      :key="item.id"
                      :label="item.name"
                      :value="item.id">
                      </el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label="学年" prop="schoolYear">
                    <el-input v-model="ruleForm.schoolYear" placeholder="请输入学年"></el-input>
                  </el-form-item>
                  <el-form-item label="考试时间" required>
                    <el-col :span="11">
                      <el-form-item prop="examTime">
                        <el-date-picker type="date" :picker-options="pickerOptions" placeholder="选择日期" v-model="ruleForm.examTime" value-format="yyyy-MM-dd HH:mm:ss" style="width: 100%;"></el-date-picker>
                      </el-form-item>
                    </el-col>
                  </el-form-item>
                  <el-form-item label="期望结课时间" required>
                    <el-col :span="11">
                      <el-form-item prop="endCourseTime">
                        <el-date-picker type="date" :picker-options="pickerOptions" placeholder="选择日期" v-model="ruleForm.endCourseTime" value-format="yyyy-MM-dd HH:mm:ss" style="width: 100%;"></el-date-picker>
                      </el-form-item>
                    </el-col>
                  </el-form-item>
                  <el-form-item label="在读学历" prop="levelId">
                    <el-select v-model="ruleForm.levelId" placeholder="请选择在读学历">
                        <el-option
                        v-for="item in levels"
                        :key="item.id"
                        :label="item.name"
                        :value="item.id">
                        </el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label="学校教务系统账号" prop="schoolAccount">
                    <el-input v-model="ruleForm.schoolAccount"></el-input>
                  </el-form-item>
                  <el-form-item label="学校教务系统密码" prop="schoolPws">
                    <el-input v-model="ruleForm.schoolPws"></el-input>
                  </el-form-item>
                  <el-form-item label="周一" prop="one" class="clearfix">
                    <div class="fl" style="width:33%;">
                      <el-time-select
                      placeholder="起始时间"
                      v-model="ruleForm.startTime1"
                      style="width:120px"
                      :picker-options="{
                        start: '08:00',
                        step: '00:15',
                        end: '12:00'
                      }">
                    </el-time-select>
                    <el-time-select
                      placeholder="结束时间"
                      v-model="ruleForm.endTime1"
                      style="width:120px"
                      :picker-options="{
                        start: '08:00',
                        step: '00:15',
                        end: '12:00',
                        minTime: ruleForm.startTime1
                      }">
                    </el-time-select>
                    </div>
                    <div class="fl" style="width:33%;">
                        <el-time-select
                        placeholder="起始时间"
                        v-model="ruleForm.startTime2"
                        style="width:120px"
                        :picker-options="{
                          start: '12:00',
                          step: '00:15',
                          end: '18:00'
                        }">
                      </el-time-select>
                      <el-time-select
                        placeholder="结束时间"
                        v-model="ruleForm.endTime2"
                        style="width:120px"
                        :picker-options="{
                          start: '12:00',
                          step: '00:15',
                          end: '18:00',
                          minTime: ruleForm.startTime2
                        }">
                      </el-time-select>
                      </div>
                      <div class="fl" style="width:33%;">
                          <el-time-select
                          placeholder="起始时间"
                          v-model="ruleForm.startTime3"
                          style="width:120px"
                          :picker-options="{
                            start: '18:00',
                            step: '00:15',
                            end: '24:00'
                          }">
                        </el-time-select>
                        <el-time-select
                          placeholder="结束时间"
                          v-model="ruleForm.endTime3"
                          style="width:120px"
                          :picker-options="{
                            start: '18:00',
                            step: '00:15',
                            end: '24:00',
                            minTime: ruleForm.startTime3
                          }">
                        </el-time-select>
                        </div>
                  </el-form-item>
                  <el-form-item label="周二" prop="two" class="clearfix">
                      <div class="fl" style="width:33%;">
                        <el-time-select
                        placeholder="起始时间"
                        v-model="ruleForm.startTime4"
                        style="width:120px"
                        :picker-options="{
                          start: '08:00',
                          step: '00:15',
                          end: '12:00'
                        }">
                      </el-time-select>
                      <el-time-select
                        placeholder="结束时间"
                        v-model="ruleForm.endTime4"
                        style="width:120px"
                        :picker-options="{
                          start: '08:00',
                          step: '00:15',
                          end: '12:00',
                          minTime: ruleForm.startTime4
                        }">
                      </el-time-select>
                      </div>
                      <div class="fl" style="width:33%;">
                          <el-time-select
                          placeholder="起始时间"
                          v-model="ruleForm.startTime5"
                          style="width:120px"
                          :picker-options="{
                            start: '12:00',
                            step: '00:15',
                            end: '18:00'
                          }">
                        </el-time-select>
                        <el-time-select
                          placeholder="结束时间"
                          v-model="ruleForm.endTime5"
                          style="width:120px"
                          :picker-options="{
                            start: '12:00',
                            step: '00:15',
                            end: '18:00',
                            minTime: ruleForm.startTime5
                          }">
                        </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select
                            placeholder="起始时间"
                            v-model="ruleForm.startTime6"
                            style="width:120px"
                            :picker-options="{
                              start: '18:00',
                              step: '00:15',
                              end: '24:00'
                            }">
                          </el-time-select>
                          <el-time-select
                            placeholder="结束时间"
                            v-model="ruleForm.endTime6"
                            style="width:120px"
                            :picker-options="{
                              start: '18:00',
                              step: '00:15',
                              end: '24:00',
                              minTime: ruleForm.startTime6
                            }">
                          </el-time-select>
                          </div>
                    </el-form-item>
                    <el-form-item label="周三" prop="three" class="clearfix">
                        <div class="fl" style="width:33%;">
                          <el-time-select
                          placeholder="起始时间"
                          v-model="ruleForm.startTime7"
                          style="width:120px"
                          :picker-options="{
                            start: '08:00',
                            step: '00:15',
                            end: '12:00'
                          }">
                        </el-time-select>
                        <el-time-select
                          placeholder="结束时间"
                          v-model="ruleForm.endTime7"
                          style="width:120px"
                          :picker-options="{
                            start: '08:00',
                            step: '00:15',
                            end: '12:00',
                            minTime: ruleForm.startTime7
                          }">
                        </el-time-select>
                        </div>
                        <div class="fl" style="width:33%;">
                            <el-time-select
                            placeholder="起始时间"
                            v-model="ruleForm.startTime8"
                            style="width:120px"
                            :picker-options="{
                              start: '12:00',
                              step: '00:15',
                              end: '18:00'
                            }">
                          </el-time-select>
                          <el-time-select
                            placeholder="结束时间"
                            v-model="ruleForm.endTime8"
                            style="width:120px"
                            :picker-options="{
                              start: '12:00',
                              step: '00:15',
                              end: '18:00',
                              minTime: ruleForm.startTime8
                            }">
                          </el-time-select>
                          </div>
                          <div class="fl" style="width:33%;">
                              <el-time-select
                              placeholder="起始时间"
                              v-model="ruleForm.startTime9"
                              style="width:120px"
                              :picker-options="{
                                start: '18:00',
                                step: '00:15',
                                end: '24:00'
                              }">
                            </el-time-select>
                            <el-time-select
                              placeholder="结束时间"
                              v-model="ruleForm.endTime9"
                              style="width:120px"
                              :picker-options="{
                                start: '18:00',
                                step: '00:15',
                                end: '24:00',
                                minTime: ruleForm.startTime9
                              }">
                            </el-time-select>
                            </div>
                      </el-form-item>
                      <el-form-item label="周四" prop="four" class="clearfix">
                          <div class="fl" style="width:33%;"> 
                            <el-time-select
                            placeholder="起始时间"
                            v-model="ruleForm.startTime10"
                            style="width:120px"
                            :picker-options="{
                              start: '08:00',
                              step: '00:15',
                              end: '12:00'
                            }">
                          </el-time-select>
                          <el-time-select
                            placeholder="结束时间"
                            v-model="ruleForm.endTime10"
                            style="width:120px"
                            :picker-options="{
                              start: '08:00',
                              step: '00:15',
                              end: '12:00',
                              minTime: ruleForm.startTime10
                            }">
                          </el-time-select>
                          </div>
                          <div class="fl" style="width:33%;">
                              <el-time-select
                              placeholder="起始时间"
                              v-model="ruleForm.startTime11"
                              style="width:120px"
                              :picker-options="{
                                start: '12:00',
                                step: '00:15',
                                end: '18:00'
                              }">
                            </el-time-select>
                            <el-time-select
                              placeholder="结束时间"
                              v-model="ruleForm.endTime11"
                              style="width:120px"
                              :picker-options="{
                                start: '12:00',
                                step: '00:15',
                                end: '18:00',
                                minTime: ruleForm.startTime11
                              }">
                            </el-time-select>
                            </div>
                            <div class="fl" style="width:33%;">
                                <el-time-select
                                placeholder="起始时间"
                                v-model="ruleForm.startTime12"
                                style="width:120px"
                                :picker-options="{
                                  start: '18:00',
                                  step: '00:15',
                                  end: '24:00'
                                }">
                              </el-time-select>
                              <el-time-select
                                placeholder="结束时间"
                                v-model="ruleForm.endTime12"
                                style="width:120px"
                                :picker-options="{
                                  start: '18:00',
                                  step: '00:15',
                                  end: '24:00',
                                  minTime: ruleForm.startTime12
                                }">
                              </el-time-select>
                              </div>
                        </el-form-item>
                        <el-form-item label="周五" prop="five" class="clearfix">
                            <div class="fl" style="width:33%;">
                              <el-time-select
                              placeholder="起始时间"
                              v-model="ruleForm.startTime13"
                              style="width:120px"
                              :picker-options="{
                                start: '08:00',
                                step: '00:15',
                                end: '12:00'
                              }">
                            </el-time-select>
                            <el-time-select
                              placeholder="结束时间"
                              v-model="ruleForm.endTime13"
                              style="width:120px"
                              :picker-options="{
                                start: '08:00',
                                step: '00:15',
                                end: '12:00',
                                minTime: ruleForm.startTime13
                              }">
                            </el-time-select>
                            </div>
                            <div class="fl" style="width:33%;">
                                <el-time-select
                                placeholder="起始时间"
                                v-model="ruleForm.startTime14"
                                style="width:120px"
                                :picker-options="{
                                  start: '12:00',
                                  step: '00:15',
                                  end: '18:00'
                                }">
                              </el-time-select>
                              <el-time-select
                                placeholder="结束时间"
                                v-model="ruleForm.endTime14"
                                style="width:120px"
                                :picker-options="{
                                  start: '12:00',
                                  step: '00:15',
                                  end: '18:00',
                                  minTime: ruleForm.startTime14
                                }">
                              </el-time-select>
                              </div>
                              <div class="fl" style="width:33%;">
                                  <el-time-select
                                  placeholder="起始时间"
                                  v-model="ruleForm.startTime15"
                                  style="width:120px"
                                  :picker-options="{
                                    start: '18:00',
                                    step: '00:15',
                                    end: '24:00'
                                  }">
                                </el-time-select>
                                <el-time-select
                                  placeholder="结束时间"
                                  v-model="ruleForm.endTime15"
                                  style="width:120px"
                                  :picker-options="{
                                    start: '18:00',
                                    step: '00:15',
                                    end: '24:00',
                                    minTime: ruleForm.startTime15
                                  }">
                                </el-time-select>
                                </div>
                          </el-form-item>
                          <el-form-item label="周六" prop="six" class="clearfix">
                              <div class="fl" style="width:33%;">
                                <el-time-select
                                placeholder="起始时间"
                                v-model="ruleForm.startTime16"
                                style="width:120px"
                                :picker-options="{
                                  start: '08:00',
                                  step: '00:15',
                                  end: '12:00'
                                }">
                              </el-time-select>
                              <el-time-select
                                placeholder="结束时间"
                                v-model="ruleForm.endTime16"
                                style="width:120px"
                                :picker-options="{
                                  start: '08:00',
                                  step: '00:15',
                                  end: '12:00',
                                  minTime: ruleForm.startTime16
                                }">
                              </el-time-select>
                              </div>
                              <div class="fl" style="width:33%;">
                                  <el-time-select
                                  placeholder="起始时间"
                                  v-model="ruleForm.startTime17"
                                  style="width:120px"
                                  :picker-options="{
                                    start: '12:00',
                                    step: '00:15',
                                    end: '18:00'
                                  }">
                                </el-time-select>
                                <el-time-select
                                  placeholder="结束时间"
                                  v-model="ruleForm.endTime17"
                                  style="width:120px"
                                  :picker-options="{
                                    start: '12:00',
                                    step: '00:15',
                                    end: '18:00',
                                    minTime: ruleForm.startTime17
                                  }">
                                </el-time-select>
                                </div>
                                <div class="fl" style="width:33%;">
                                    <el-time-select
                                    placeholder="起始时间"
                                    v-model="ruleForm.startTime18"
                                    style="width:120px"
                                    :picker-options="{
                                      start: '18:00',
                                      step: '00:15',
                                      end: '24:00'
                                    }">
                                  </el-time-select>
                                  <el-time-select
                                    placeholder="结束时间"
                                    v-model="ruleForm.endTime18"
                                    style="width:120px"
                                    :picker-options="{
                                      start: '18:00',
                                      step: '00:15',
                                      end: '24:00',
                                      minTime: ruleForm.startTime18
                                    }">
                                  </el-time-select>
                                  </div>
                            </el-form-item>
                            <el-form-item label="周日" prop="seven" class="clearfix">
                                <div class="fl" style="width:33%;">
                                  <el-time-select
                                  placeholder="起始时间"
                                  v-model="ruleForm.startTime19"
                                  style="width:120px"
                                  :picker-options="{
                                    start: '08:00',
                                    step: '00:15',
                                    end: '12:00'
                                  }">
                                </el-time-select>
                                <el-time-select
                                  placeholder="结束时间"
                                  v-model="ruleForm.endTime19"
                                  style="width:120px"
                                  :picker-options="{
                                    start: '08:00',
                                    step: '00:15',
                                    end: '12:00',
                                    minTime: ruleForm.startTime19
                                  }">
                                </el-time-select>
                                </div>
                                <div class="fl" style="width:33%;">
                                    <el-time-select
                                    placeholder="起始时间"
                                    v-model="ruleForm.startTime20"
                                    style="width:120px"
                                    :picker-options="{
                                      start: '12:00',
                                      step: '00:15',
                                      end: '18:00'
                                    }">
                                  </el-time-select>
                                  <el-time-select
                                    placeholder="结束时间"
                                    v-model="ruleForm.endTime20"
                                    style="width:120px"
                                    :picker-options="{
                                      start: '12:00',
                                      step: '00:15',
                                      end: '18:00',
                                      minTime: ruleForm.startTime20
                                    }">
                                  </el-time-select>
                                  </div>
                                  <div class="fl" style="width:33%;">
                                      <el-time-select
                                      placeholder="起始时间"
                                      v-model="ruleForm.startTime21"
                                      style="width:120px"
                                      :picker-options="{
                                        start: '18:00',
                                        step: '00:15',
                                        end: '24:00'
                                      }">
                                    </el-time-select>
                                    <el-time-select
                                      placeholder="结束时间"
                                      v-model="ruleForm.endTime21"
                                      style="width:120px"
                                      :picker-options="{
                                        start: '18:00',
                                        step: '00:15',
                                        end: '24:00',
                                        minTime: ruleForm.startTime21
                                      }">
                                    </el-time-select>
                                    </div>
                              </el-form-item>
                              <el-button type="primary" @click="next()" style="margin-left:50%;">下一步</el-button>
                </div>
            <div v-show="!showb">
              <el-form-item label="课程名称" prop="courseName">
                <el-input v-model="ruleForm.courseName"></el-input>
              </el-form-item>
              <el-form-item label="课程代码" prop="courseCode">
                <el-input v-model="ruleForm.courseCode"></el-input>
              </el-form-item>
              <el-form-item label="订单类型" prop="type">
                <el-select v-model="ruleForm.type" placeholder="请选择订单类型" @change="change_order">
                  <el-option label="定制辅导" value="0"></el-option>
                  <el-option label="考前突击" value="1"></el-option>
                  <el-option label="包课辅导" value="2"></el-option>
                  <el-option label="论文辅导" value="4"></el-option>
                  <el-option label="特殊订单" value="32"></el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="预计课时" prop="scheduledTime" v-show = "order">
                <el-input v-model="ruleForm.scheduledTime" @blur="changeprice()" style="width:210px;"></el-input>
              </el-form-item>
              <el-form-item label="课时单价" prop="price" v-show = "order">
                <el-input v-model="ruleForm.price" @blur="changeprice()" style="width:210px;"></el-input>
                <el-button disabled>{{cu.currency}}</el-button>
              </el-form-item>
              <el-form-item label="课时总价" prop="totalPrice">
                <el-input v-model="ruleForm.totalPrice" style="width:210px;" v-bind:disabled="dis"></el-input>
                <el-button disabled>{{cu.currency}}</el-button>
              </el-form-item>
              <el-form-item label="课程熟悉度" prop="courseFamiliarityId">
                <el-select v-model="ruleForm.courseFamiliarityId" placeholder="请选择课程熟悉度">
                  <el-option
                  v-for="item in courseFamiliaritys"
                  :key="item.id"
                  :label="item.familiarityName"
                  :value="item.id">
                  </el-option>
                </el-select>
              </el-form-item>
              <el-form-item label="辅导需求描述" prop="sellerDemandDesc">
                <el-input type="textarea" v-model="ruleForm.sellerDemandDesc"></el-input>
              </el-form-item>
              <el-form-item>
                <el-button type="primary" @click="save('ruleForm')" v-bind:loading="btnstatus">{{btnval}}</el-button>
                <el-button type="primary" @click="back">返回</el-button>
              </el-form-item>
              </div>
            </el-form>
            </div>
          </div>
        </div>
</body>
  <script src="js/jquery.js"></script>
  <script src="js/vue.js"></script>
  <script src="js/index.js"></script>
  <script src="js/axios.min.js"></script>
  <script src="../../js/base.js"></script>
  <script type="text/javascript">  
  var vm = new Vue({  
    el:'#app',
    data() {
      return {
        pickerOptions: {
        disabledDate(time) {
          return time.getTime() < Date.now() - 8.64e7;
        }
      }, 
      color: '',
      btnstatus:false,
      btnval:"创建",
      countryId:'',
      error:'',
      mobile_show:true,
      yes:false,
      no:false,
      wxAccount:'',
      restaurants: [],
      mobiles:'',
      mobile:'',
      dis:true,
      order:false,
      sellerDemandDesc:'',
      cu:{}, 
      disabledInput:true, 
      countrys:'',  
      active: 0, 
      showone:true,
      showList: true,
      showa:false,
      showb:true,
      activeName: 'first',
      courseFamiliaritys:'',
      show: true,
      show1: true,
      show2: true,
      show3: true,
      purchaseOrderId:'',
      professionalNames:'',
      demands:'',
      levels:'',
      universitys:'',
      tableDataBegin: [],
      tableDataName: "",
      tableDataEnd: [],
      currentPage: 0,
      pageSize: 0,
      total:0,
      phone:'',
      professionalName:'',
      idss:[],
      options:[],
      selectedOptions: [],
      name:'',
      label:'',
      sellerDemandDesc:'',
      dialogStatus: "",
      ruleForm: {
        countryId:'',
        universityId:'',
        levelId:'',
        schoolYear:'',
        professionalId:'',
        nickName:'',
        wxAccount:'',
        mobile:'',
        sellerDemandDesc:'',
      sellerDemandDesc:'',
      totalPrice:'',  
      price:'',  
      scheduledTime:'',  
      courseFamiliaritys:'',
      countrysid:'',
      startTime1: '',
      endTime1: '',
      startTime2: '',
      endTime2: '',
      startTime3: '',
      endTime3: '',
      startTime4: '',
      endTime4: '',
      startTime5: '',
      endTime5: '',
      startTime6: '',
      endTime6: '',
      startTime7: '',
      endTime7: '',
      startTime8: '',
      endTime8: '',
      startTime9: '',
      endTime9: '',
      startTime10: '',
      endTime10: '',
      startTime11: '',
      endTime11: '',
      startTime12: '',
      endTime12: '',
      startTime13: '',
      endTime13: '',
      startTime14: '',
      endTime14: '',
      startTime15: '',
      endTime15: '',
      startTime16: '',
      endTime16: '',
      startTime17: '',
      endTime17: '',
      startTime18: '',
      endTime18: '',
      startTime19: '',
      endTime19: '',
      startTime20: '',
      endTime20: '',
      startTime21: '',
      endTime21: '',
        },
        rules: {
          wxAccount: [
            { required: true, message: '请输入微信号', trigger: 'blur' },
          ],
          totalPrice: [
            { required: true, message: '请输入总价', trigger: 'blur' },
          ],
          countrysid: [
            { required: true, message: '请选择留学国家', trigger: 'change' },
          ],
          mobile: [
            { required: true, message: '请输入学生手机号', trigger: 'change' },
          ],
          // password: [
          //   { required: true, message: '请输入密码', trigger: 'blur' },
          // ],
          countryId: [
            { required: true, message: '请选择国家id', trigger: 'change' },
          ],
          professionalId: [
            { required: true, message: '请输入专业名称', trigger: 'blur' },
          ],
          courseName: [
            { required: true, message: '请输入课程名称', trigger: 'blur' },
          ],
          courseCode: [
            { required: true, message: '请输入课程编号', trigger: 'blur' },
          ],
          sellerDemandDesc: [
            { required: true, message: '请输入学生辅导需求', trigger: 'blur' },
          ],
          sellerDemandDesc: [
            { required: true, message: '请输入课程单价', trigger: 'blur' },
          ],
          nickName: [
            { required: true, message: '请输入学生姓名', trigger: 'blur' },
          ],
          universityId: [
            { required: true, message: '请选择学校', trigger: 'change' },
          ],
          levelId: [
            { required: true, message: '请选择学术级别', trigger: 'change' },
          ],
          schoolYear: [
            { required: true, message: '请输入学年', trigger: 'blur' },
          ],
          examTime: [
            { required: true, message: '请输入考试时间]', trigger: 'blur' },
          ],
          endCourseTime: [
            { required: true, message: '请输入期望节课时间', trigger: 'blur' },
          ],
          type: [
            { required: true, message: '请选择订单类型', trigger: 'change' },
          ],
          schoolAccount: [
            { required: true, message: '请输入学校教务系统账号', trigger: 'blur' },
          ],
          schoolPws: [
            { required: true, message: '请输入学校教务系统密码', trigger: 'blur' },
          ],
          courseFamiliarityId: [
            { required: true, message: '请选择课程熟悉度', trigger: 'change' }
          ]
        }
      }
 },
 multipleSelection: [],
  mounted() {
  this.getcountrys(); 
  this.level(); 
  this.demand(); 
  this.professionalNamedata();
  this.get_courseFamiliarity();
  this.xx(); 
  var self = this;  
 },
 methods: {
  display(){
    this.$confirm('是否要执行此操作?', '提示', {
          confirmButtonText: '确定',
          cancelButtonText: '取消',
          type: 'warning'
        }).then(() => {
          vm.disabledInput=false;
        }).catch(() => {

        });
  },
  iftrue(){
    $.ajax({  
          type : "get",  
          dataType: "json", 
          data:{
            "token": token,
            "absoluteMobile": vm.$refs.ruleForm.model.mobile,
            "page": 1,
            "limit": 100000 ,
          } ,
          url : ""+baseURL+"/sys/seller/order/checkMobile",  
          success : function(json) {  
            if(json.status == 200){
              if(json.body.studUserRVO == null){
              // vm.yes = true;
              // vm.no = false;
              // vm.mobile_show = true;
               vm.error = ""
            }
            else{
              // vm.yes = false;
              // vm.no = true;
              vm.mobile_show = false;
              vm.$refs.ruleForm.model.nickName = json.body.studUserRVO.nickName;
              vm.ruleForm.countryId = json.body.studUserRVO.countryId;
              vm.countryId = json.body.studUserRVO.countryId;
              vm.$refs.ruleForm.model.wxAccount = json.body.studUserRVO.wxAccount;
              vm.ruleForm.universityId = json.body.studUserRVO.universityId;
              vm.ruleForm.levelId = json.body.studUserRVO.eduId;
              vm.ruleForm.schoolYear = json.body.studUserRVO.schoolYear;
              vm.ruleForm.professionalId = json.body.studUserRVO.professionalId;
              vm.error = "该学生已注册，对应的信息已经显示到页面，你现在可以直接给TA下单啦";
              vm.color = 'green';
              vm.xx();
              vm.getCurrent(vm.countrys , vm.countryId);
              }
            if(json.body.teacUserRVO != null){
                vm.color = 'red';
                vm.error = "该账号已经被老师注册，请更换手机号";
                vm.ruleForm.nickName = "";
                vm.ruleForm.wxAccount = "";
                vm.ruleForm.countryId = "";
                vm.ruleForm.universityId = "";
                vm.ruleForm.levelId = "";
                vm.ruleForm.schoolYear = "";
                vm.ruleForm.professionalId = "";
              }
            if (json.body.sysUserEntity != null)
              {
                vm.color = 'red';
                vm.error = "该账号已经在CRM注册，请更换手机号";
                vm.ruleForm.nickName = "";
                vm.ruleForm.wxAccount = "";
                vm.ruleForm.countryId = "";
                vm.ruleForm.universityId = "";
                vm.ruleForm.levelId = "";
                vm.ruleForm.schoolYear = "";
                vm.ruleForm.professionalId = "";
              }
              if(json.body.studUserRVO == null && json.body.sysUserEntity == null && json.body.teacUserRVO == null){
              // vm.yes = true;
              // vm.no = false;
              vm.mobile_show = true;
               vm.error = "该账号未被注册";
               vm.color = 'green';
            }
            }
          if(json.status == 400){
            vm.error = json.body.msg;
            vm.ruleForm.nickName = "";
          }

         } 
      });
  },
  // querySearch(queryString, cb) {
  //       var restaurants = vm.restaurants;
  //       var results = queryString ? restaurants.filter(this.createFilter(queryString)) : restaurants;
  //       cb(results);
  //     },
      // createFilter(queryString) {
      //   return (restaurant) => {
      //     return (restaurant.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);
      //   };
      // },

      // querySearch(queryString, callback) {
      // var restaurants = "";
      // var self = this;  
      // axios.get(""+baseURL+"/sys/seller/order/queryStudent",{
      // params:{
      //   "token": token,
      //   "page": 1,
      //   "limit": 100000 ,
      //   "mobile" : queryString,
      //   "key" : queryString,
      // }
      // })
      // .then(function(response){
      //   restaurants =  response.data.body.list;
      //   callback(restaurants);
      // })
      // .catch(function(err){
      //   console.log(err);
      // });
      // },      
      // handleSelect(item) {
      //   $.ajax({  
      //     type : "get",  
      //     dataType: "json", 
      //     data:{
      //       "token": token,
      //       "page": 1,
      //       "limit": 1000,
      //       "mobile" : item.mobile,
      //       "key" : item.mobile,
      //     } ,
      //     url : ""+baseURL+"sys/seller/order/queryStudent",  
      //     success : function(json) {  
      //       vm.$refs.ruleForm.model.nickName = json.body.list[0].nickName;
      //       vm.$refs.ruleForm.model.countryId = json.body.list[0].countryId;
      //       vm.$refs.ruleForm.model.wxAccount = json.body.list[0].wxAccount;
      //       vm.$refs.ruleForm.model.universityId = json.body.list[0].universityId;
      //       vm.universityId =  json.body.list[0].universityId;
      //       vm.$refs.ruleForm.model.levelId = json.body.list[0].eduId;
      //       vm.$refs.ruleForm.model.schoolYear = json.body.list[0].schoolYear;
      //       vm.$refs.ruleForm.model.professionalId = json.body.list[0].professionalId;
      //    } 
      // });
      // },
      getCurrent(cus , cuid){
        cus.forEach(element => {
          var cid = element.id;
          if(cid === cuid){
            vm.cu.currency = element.currency;
            return element.currency;
          }
          return "未找到指定币种";
        });
      },
  change_order(val){
    if(val == 0){
      vm.order = true;
      vm.dis = true;
    }else{
      vm.order = false;
      vm.currency = null;
      vm.dis = false;
    }
  },  
  get_courseFamiliarity(){
        $.ajax({  
          type : "get",  
          dataType: "json", 
          data:{
            "token": token,
            "page": 1,
            "limit": 6,
            "onlyMe": true
          } ,
          url : ""+baseURL+"sys/basedata/coursefamiliarity/list",  
          success : function(json) {  
            vm.courseFamiliaritys = json.body.list;
         } 
      }); 
      },
  change_state(val){
    vm.disabledInput=true;
    let obj = {};
    obj = this.countrys.find((item)=>{
        return item.id === val;
    });
    vm.cu = obj;
    vm.countryId = val;
    vm.xx();
  },

  getcountrys(){
    $.ajax({  
      type : "get",  
      dataType: "json", 
      data:{
        "token": token,
        "page": 1,
        "limit": 1000
      } ,
      url : ""+baseURL+"sys/basedata/country/list",  
      success : function(json) {  
        vm.countrys = json.body.list;
      }
  });
  },

 handleClick(tab, first) {
  var val = tab.index;
  console.log(val);
  if(val == 0){
    vm.showa = false;
    vm.showb = true;
  }else{
    vm.showa = true;
    vm.showb = false;
  }
}, 
next(){
  vm.showa = true;
  vm.showb = false;
  vm.activeName='second';
},  
up(){
  vm.showa = false;
  vm.showb = true;
}, 
// 返回
back(tab, first){
  window.location.reload();
},  
// 保存      
save(formName) {
  var model = this.$refs.ruleForm.model;
  var startTime1 = this.$refs.ruleForm.model.startTime1;
  var endTime1 = this.$refs.ruleForm.model.endTime1;
  var startTime2 = this.$refs.ruleForm.model.startTime2;
  var endTime2 = this.$refs.ruleForm.model.endTime2;
  var startTime3 = this.$refs.ruleForm.model.startTime3;
  var endTime3 = this.$refs.ruleForm.model.endTime3;
  var startTime4 = this.$refs.ruleForm.model.startTime4;
  var endTime4 = this.$refs.ruleForm.model.endTime4;
  var startTime5 = this.$refs.ruleForm.model.startTime5;
  var endTime5 = this.$refs.ruleForm.model.endTime5;
  var startTime6 = this.$refs.ruleForm.model.startTime6;
  var endTime6 = this.$refs.ruleForm.model.endTime6;
  var startTime7 = this.$refs.ruleForm.model.startTime7;
  var endTime7 = this.$refs.ruleForm.model.endTime7;
  var startTime8 = this.$refs.ruleForm.model.startTime8;
  var endTime8 = this.$refs.ruleForm.model.endTime8;
  var startTime9 = this.$refs.ruleForm.model.startTime9;
  var endTime9 = this.$refs.ruleForm.model.endTime9;
  var startTime10 = this.$refs.ruleForm.model.startTime10;
  var endTime10 = this.$refs.ruleForm.model.endTime10;
  var startTime11 = this.$refs.ruleForm.model.startTime11;
  var endTime11 = this.$refs.ruleForm.model.endTime11;
  var startTime12 = this.$refs.ruleForm.model.startTime12;
  var endTime12 = this.$refs.ruleForm.model.endTime12;
  var startTime13 = this.$refs.ruleForm.model.startTime13;
  var endTime13 = this.$refs.ruleForm.model.endTime13;
  var startTime14 = this.$refs.ruleForm.model.startTime14;
  var endTime14 = this.$refs.ruleForm.model.endTime14;
  var startTime15 = this.$refs.ruleForm.model.startTime15;
  var endTime15 = this.$refs.ruleForm.model.endTime15;
  var startTime16 = this.$refs.ruleForm.model.startTime16;
  var endTime16 = this.$refs.ruleForm.model.endTime16;
  var startTime17 = this.$refs.ruleForm.model.startTime17;
  var endTime17 = this.$refs.ruleForm.model.endTime17;
  var startTime18 = this.$refs.ruleForm.model.startTime18;
  var endTime18 = this.$refs.ruleForm.model.endTime18;
  var startTime19 = this.$refs.ruleForm.model.startTime19;
  var endTime19 = this.$refs.ruleForm.model.endTime19;
  var startTime20 = this.$refs.ruleForm.model.startTime20;
  var endTime20 = this.$refs.ruleForm.model.endTime20;
  var startTime21 = this.$refs.ruleForm.model.startTime21;
  var endTime21 = this.$refs.ruleForm.model.endTime21;
  if(startTime1 == ""||endTime1 == ""){
    time1 = '';
    }else{
      time1 = startTime1+"-"+endTime1;
    }
  if(startTime2 == ""||endTime2 == ""){
    time2 = '';
  }else{
    time2 = startTime2+"-"+endTime2;
  }
  if(startTime3 == ""||endTime3 == ""){
    time3 = '';
  }else{
    time3 = startTime3+"-"+endTime3;
  }
  if(startTime4 == ""||endTime4 == ""){
    time4 = '';
  }else{
    time4 = startTime4+"-"+endTime4;
  }
  if(startTime5 == ""||endTime5 == ""){
    time5 = '';
  }else{
    time5 = startTime5+"-"+endTime5;
  }
  if(startTime6 == ""||endTime6 == ""){
    time6 = '';
  }else{
    time6 = startTime6+"-"+endTime6;
  }
  if(startTime7 == ""||endTime7 == ""){
    time7 = '';
  }else{
    time7 = startTime7+"-"+endTime7;
  }
  if(startTime8 == ""||endTime8 == ""){
    time8 = '';
  }else{
    time8 = startTime8+"-"+endTime8;
  }
  if(startTime9 == ""||endTime9 == ""){
    time9 = '';
  }else{
    time9 = startTime9+"-"+endTime9;
  }
  if(startTime10 == ""||endTime10 == ""){
    time10 = '';
  }else{
    time10 = startTime10+"-"+endTime10;
  }
  if(startTime11 == ""||endTime11 == ""){
    time11 = '';
  }else{
    time11 = startTime11+"-"+endTime11;
  }
  if(startTime12 == ""||endTime12 == ""){
    time12 = '';
  }else{
    time12 = startTime12+"-"+endTime12;
  }
  if(startTime13 == ""||endTime13 == ""){
    time13 = '';
  }else{
    time13 = startTime13+"-"+endTime13;
  }
  if(startTime14 == ""||endTime14 == ""){
    time14 = '';
  }else{
    time14 = startTime14+"-"+endTime14;
  }
  if(startTime15 == ""||endTime15 == ""){
    time15 = '';
  }else{
    time15 = startTime15+"-"+endTime15;
  }
  if(startTime16 == ""||endTime16 == ""){
    time16 = '';
  }else{
    time16 = startTime16+"-"+endTime16;
  }
  if(startTime17 == ""||endTime17 == ""){
    time17 = '';
  }else{
    time17 = startTime17+"-"+endTime17;
  }
  if(startTime18 == ""||endTime18 == ""){
    time18 = '';
  }else{
    time18 = startTime18+"-"+endTime18;
  }
  if(startTime19 == ""||endTime19 == ""){
    time19 = '';
  }else{
    time19 = startTime19+"-"+endTime19;
  }
  if(startTime20 == ""||endTime20 == ""){
    time20 = '';
  }else{
    time20 = startTime20+"-"+endTime20;
  }
  if(startTime21 == ""||endTime21 == ""){
    time21 = '';
  }else{
    time21 = startTime21+"-"+endTime21;
  }
  var freetime = time1+','+time2+','+time3+'|'+time4+','+time5+','+time6+'|'+time7+','+time8+','+time9+'|'+time10+','+time11+','+time12+'|'+time13+','+time14+','+time15+'|'+time16+','+time17+','+time18+'|'+time19+','+time20+','+time21;
  var self = this;
  this.$refs[formName].validate((valid) => {
    if (valid) {
      var totalPrice = Number(this.$refs.ruleForm.model.totalPrice);
      var price = Number(this.$refs.ruleForm.model.price);
      vm.btnstatus=true;
      vm.btnval="加载中";
      $.ajax({
        type: "POST",
        headers: {"token": token},
          url: ""+baseURL+"sys/seller/order/savePurchaseOrder",
          contentType: "application/json",
          data: JSON.stringify({
            "studUser": {
                  mobile: this.$refs.ruleForm.model.mobile,
                  password: this.$refs.ruleForm.model.password,
                  countryId: this.$refs.ruleForm.model.countryId,
                  nickName: this.$refs.ruleForm.model.nickName,
                  wxAccount: this.$refs.ruleForm.model.wxAccount,
                },
            flag:1,  
            wxAccount: this.$refs.ruleForm.model.wxAccount,
            studentName:this.$refs.ruleForm.model.nickName,  
            countryId: this.$refs.ruleForm.model.countryId, 
            professionalId : this.$refs.ruleForm.model.professionalId,    
            type : this.$refs.ruleForm.model.type,
            courseName : this.$refs.ruleForm.model.courseName,
            courseCode : this.$refs.ruleForm.model.courseCode,
            scheduledTime : this.$refs.ruleForm.model.scheduledTime,
            decimalTotalPrice : totalPrice,
            decimalPrice : price,
            decimalPrice : Number(this.$refs.ruleForm.model.price),
            universityId : this.$refs.ruleForm.model.universityId,
            eduId : Number(this.$refs.ruleForm.model.levelId),
            schoolYear : this.$refs.ruleForm.model.schoolYear,
            examTime : this.$refs.ruleForm.model.examTime,
            endCourseTime : this.$refs.ruleForm.model.endCourseTime,
            courseFamiliarityId : Number(this.$refs.ruleForm.model.courseFamiliarityId),
            courseFamiliarity : vm.familiarity,
            type : Number(this.$refs.ruleForm.model.type),
            schoolAccount : this.$refs.ruleForm.model.schoolAccount,
            schoolPws : this.$refs.ruleForm.model.schoolPws,
            spareTime:freetime,
            sellerDemandDesc : this.$refs.ruleForm.model.sellerDemandDesc,
          }),
          success: function(r){
            if(r.status == 200){
              self.$message({
              message: '创建成功',
              type: 'success'
            });
            vm.btnstatus=false;
            vm.btnval="创建";
            localStorage.setItem("stname", vm.ruleForm.nickName);
            localStorage.setItem("temCourseName", vm.ruleForm.courseName);
            window.open("crm2/crm_chat/index.html?id="+r.body.courseId+"&userId="+r.body.userId+"", "impage", "");
            window.history.back();
            }
            if(r.status == 400){
              self.$message({
              message: r.body.msg,
              type: 'warning',
            });
            vm.btnstatus=false;
              vm.btnval="创建";
            }
        }
  });
  } else {
          console.log('error submit!!');
          return false;
        }
  });
},
changeprice(){
      var num = Number(vm.ruleForm.scheduledTime);
      var price = Number(vm.ruleForm.price);
      if(num == "" && price == ""){

      }else{
        vm.ruleForm.totalPrice = num*price;
      }
    },
  level(){
    $.ajax({  
      type : "get",  
      dataType: "json", 
      data:{
        "token": token,
        "page": 1,
        "limit": 1000
      } ,
      url : ""+baseURL+"sys/basedata/edubackground/list", 
      success : function(json) {  
        vm.levels = json.body.list;
      }
  });
  },
  professionalNamedata(){
    $.ajax({  
      type : "get",  
      dataType: "json", 
      data:{
        "token": token,
        "page": 1,
        "limit": 1000
      } ,
      url : ""+baseURL+"sys/basedata/professionalCourses/list",  
      success : function(json) {  
        vm.professionalNames = json.body.list;
      }
  });
  },
  demand(){
    $.ajax({  
      type : "get",  
      dataType: "json", 
      data:{
        "token": token,
        "page": 1,
        "limit": 1000
      } ,
      url : ""+baseURL+"sys/basedata/demandtype/list",  
      success : function(json) {  
        vm.demands = json.body.list;
      }
  });
  },    
  xx(){
    var self = this;  
    $.ajax({  
      type : "get",  
      dataType: "json", 
      data:{
        "token": token,
        "page": 1,
        "limit": 1000,
        "countryId":this.countryId
      } ,
      url : ""+baseURL+"sys/basedata/university/list",  
      success : function(json) {  
        vm.universitys = json.body.list;
      }
  });
  },      
 }
});
  </script>  
</body>  
</html>  
</html>